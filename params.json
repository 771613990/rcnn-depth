{"name":"RCNN-Depth","tagline":"","body":"###Learning Rich Features from RGB-D Images for Object Detection and Segmentation ([pdf](http://www.cs.berkeley.edu/~sgupta/pdf/rcnn-depth.pdf))###\r\n*Saurabh Gupta, Ross Girshick, Pablo Arbel√°ez and Jitendra Malik*\r\n\r\nPresented at European Conference on Computer Vision (ECCV), 2014 \r\n\r\nIn this paper we study the problem of object detection for RGB-D images using semantically rich image and depth features. We pro- pose a new geocentric embedding for depth images that encodes height above ground and angle with gravity for each pixel in addition to the hor- izontal disparity. We demonstrate that this geocentric embedding works better than using raw depth images for learning feature representations with convolutional neural networks. Our final object detection system achieves an average precision of 37.3%, which is a 56% relative improve- ment over existing methods. We then focus on the task of instance seg- mentation where we label pixels belonging to object instances found by our detector. For this task, we propose a decision forest approach that classifies pixels in the detection window as foreground or background using a family of unary and binary tests that query shape and geocentric pose features. Finally, we use the output from our object detectors in an existing superpixel classification framework for semantic scene segmentation and achieve a 24% relative improvement over current state-of-the-art for the object categories that we study. We believe advances such as those represented in this paper will facilitate the use of perception in fields like robotics.\r\n\r\n\r\n#### Citing ####\r\nIf you find this code useful in your research, please consider citing:\r\n\r\n    @incollection{guptaECCV14,\r\n      author = {Saurabh Gupta and Ross Girshick and Pablo Arbelaez and Jitendra Malik},\r\n      title = {Learning Rich Features from {RGB-D} Images for Object Detection and Segmentation},\r\n      booktitle = ECCV,\r\n      year = {2014},\r\n    }\r\n\r\n#### License ####\r\nThis code (RCNN-Depth) is released under the Simplified BSD License (refer to the LICENSE file for details). License files for individual packages are included within individual folders.\r\n\r\n#### Installation Instructions ####\r\n0. Create directory, checkout eccv14-code, utils, rgbdutils, nyu-hooks\r\n\r\n  ```shell\r\n  mkdir rcnn-depth && cd rcnn-depth\r\n  git clone git@github.com:s-gupta/rcnn-depth.git eccv14-code\r\n  git clone git@github.com:s-gupta/rgbdutils.git eccv14-code/rgbdutils\r\n  git clone git@github.com:s-gupta/utils.git eccv14-code/utils\r\n  git clone git@github.com:s-gupta/nyu-hooks.git eccv14-code/nyu-hooks\r\n  ```\r\n\r\n0. Checkout caffe-code \r\n\r\n  ```shell\r\n  git clone https://github.com/BVLC/caffe.git eccv14-code/caffe\r\n  cd eccv14-code/caffe\r\n  git checkout e5cc609138a0bc4ce5177a67cf84952756d11b38\r\n  cd ../../\r\n    ```\r\n  \r\n0. Get the data (color image, depth images, rawdepth images, splits, ground truth, tasks), and external model data (Caffe trained Imagenet model, structured forests BSDS model).\r\n\r\n  ```shell\r\n  wget http://www.cs.berkeley.edu/~sgupta/eccv14/eccv14-data.tgz\r\n  tar -xf eccv14-data.tgz\r\n  wget http://www.cs.berkeley.edu/~sgupta/eccv14/eccv14-external-data.tgz\r\n  tar -xf eccv14-external-data.tgz\r\n  ```\r\n\r\n0. Get precomputed models.\r\n \r\n  ```\r\n  wget http://www.cs.berkeley.edu/~sgupta/eccv14/eccv14-models.tgz\r\n  tar -xf eccv14-models.tgz \r\n  cd ..\r\n  ```\r\n\r\n#### Building ####\r\n0. Build caffe (Adjust paths for CUDA / MATLAB in Makefile.config.example and copy to Makefile.config)\r\n\r\n  ```shell\r\n  cd eccv14-code/caffe\r\n  make -j 16\r\n  make -j 16 matcaffe\r\n  cd ../..\r\n  ```\r\n  \r\n0. Build imagestack (Adjust paths in eccv14-code/rgbdutils/imagestack/Makefile).\r\n  ```shell\r\n  cd eccv14-code/rgbdutils/imagestack/\r\n  make all -j 16\r\n  cd ../../../\r\n  ```\r\n  \r\n0. Build toolboxes, MCG, RCNN. Start MATLAB in the folder eccv14-code\r\n\r\n  ```matlab\r\n  mcg_build();\r\n  rcnn_build();\r\n  toolboxCompile();\r\n  structured_edges_build();\r\n  ```\r\n\r\n#### Inference ####\r\n##### Contour Detection, UCMs, Region Proposals and Detection on a new image #####\r\n  ```matlab\r\n  %% Should produce results on the image in demo-data \r\n  demo();\r\n  \r\n  %% See run_all.m, demo.m to figure out what units / data type\r\n  % each image is in.\r\n  [E, ucm2, candidates, detection_scores_no_nms, cls] = ...\r\n    run_all(color_image, depth_image, rawdepth_image, camera_matrix, []);\r\n  ```\r\n  \r\n#### Training ####\r\n##### Contour Detection #####\r\n0. Run the following in MATLAB\r\n\r\n  ```matlab\r\n  jobName = 'compute_edge_cues'; script_edges;\r\n  jobName = 'train_edge_model'; script_edges;\r\n  jobName = 'test_edge_model'; script_edges;\r\n  ```\r\n\r\n##### UCMs and Region Proposals #####\r\n0. Run the following in MATLAB\r\n\r\n  ```matlab\r\n  jobName = 'edges_to_ucms'; script_regions;\r\n  jobName = 'benchmark_multi_ucm'; script_regions;\r\n  jobName = 'pareto'; script_regions;\r\n  jobName = 'cache-mcg'; script_regions;\r\n  jobName = 'rank_training'; script_regions;\r\n  jobName = 'region-detect'; script_regions;\r\n  ```\r\n\r\n##### Object detectors: finetuning, training #####\r\n0. Run the following in MATLAB. At the end of this, you will get 2 finetuning commands that you need to use with caffe for finetuning.\r\n\r\n  ```matlab\r\n  jobName = 'save_color'; script_detection;\r\n  jobName = 'save_hha'; script_detection;\r\n  jobName = 'write_window_file'; script_detection;\r\n  ```\r\n\r\n0. Use the finetuning commands that print out to finetune the CNN. Use the following to extract features and train the RCNN model.\r\n\r\n  ```matlab\r\n  jobName = 'hha_cache_features'; script_detection;\r\n  jobName = 'color_cache_features'; script_detection;\r\n  res = rcnn_all('task-guptaetal', 'train', 'val');\r\n  ```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}